{"version":3,"sources":["../../../app/schedule/inital.js"],"names":["Subscription","require","Inital","app","logger","info","ctx","createAnonymousContext","redis","keys","key","del","cron","immediate","type","module","exports"],"mappings":";;;;;;;;;;;;AAAA,IAAMA,eAAeC,QAAQ,KAAR,EAAeD,YAApC;;IAGME,M;;;;;;;;;;;;;AAUF;;;;;;;;;AAEI,qCAAKC,GAAL,CAASC,MAAT,CAAgBC,IAAhB,CAAqB,QAArB;AACMC,mC,GAAM,KAAKH,GAAL,CAASI,sBAAT,E;AACZ;;;uCACiB,KAAKJ,GAAL,CAASK,KAAT,CAAeC,IAAf,CAAoB,GAApB,C;;;AAAXA,oC;;;;;4CACSA,I;;;;;;;;AAAPC,mC;;uCACE,KAAKP,GAAL,CAASK,KAAT,CAAeG,GAAf,CAAmBD,GAAnB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGV,qCAAKP,GAAL,CAASC,MAAT,CAAgBC,IAAhB,CAAqB,YAArB;;;;;;;;;;;;;;;;;;;AAnBJ;4BACsB;AAClB,mBAAO;AACHO,sBAAM,aADH;AAEHC,2BAAU,IAFP;AAGHC,sBAAM;AAHH,aAAP;AAKH;;;;EARgBd,Y;;AA4BrBe,OAAOC,OAAP,GAAiBd,MAAjB","file":"inital.js","sourcesContent":["const Subscription = require('egg').Subscription;\n\n\nclass Inital extends Subscription {\n    // 通过 schedule 属性来设置定时任务的执行间隔等配置\n    static get schedule() {\n        return {\n            cron: '0 0 0 * * *',\n            immediate:true,\n            type: 'worker',\n        };\n    }\n\n    //\n    async subscribe() {\n        this.app.logger.info('Inital');\n        const ctx = this.app.createAnonymousContext();\n        //清空redis\n        const keys=await this.app.redis.keys('*');\n        for(let key of keys){\n            await this.app.redis.del(key);\n        }\n\n        this.app.logger.info('Inital end');\n\n\n    }\n\n\n}\n\nmodule.exports = Inital;\n"]}